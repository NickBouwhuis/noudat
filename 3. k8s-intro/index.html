



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="http://0.0.0.0:8000/3. k8s-intro/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.6.3">
    
    
      
        <title>Learning Kubernetes - Windesheim Container & Kubernetes workshop</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.adb8469c.css">
      
      
    
    
      <script src="../assets/javascripts/modernizr.86422ebf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
    
    
  <script type="text/javascript">(function(){var s=document.createElement("script");var port=window.location.port;s.src="//"+window.location.hostname+":"+port+ "/livereload.js?port=" + port;document.head.appendChild(s);})();</script></head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#learning-kubernetes" tabindex="0" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="http://0.0.0.0:8000/" title="Windesheim Container & Kubernetes workshop" aria-label="Windesheim Container & Kubernetes workshop" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Windesheim Container & Kubernetes workshop
            </span>
            <span class="md-header-nav__topic">
              
                Learning Kubernetes
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" aria-label="search" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="http://0.0.0.0:8000/" title="Windesheim Container & Kubernetes workshop" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Windesheim Container & Kubernetes workshop
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../0. docker-install/" title="Installation of Docker" class="md-nav__link">
      Installation of Docker
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../1. docker-intro/" title="Docker intro" class="md-nav__link">
      Docker intro
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../2. docker-build/" title="Building containers" class="md-nav__link">
      Building containers
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Learning Kubernetes
      </label>
    
    <a href="./" title="Learning Kubernetes" class="md-nav__link md-nav__link--active">
      Learning Kubernetes
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#getting-information-from-the-cluster" class="md-nav__link">
    Getting information from the cluster
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#namespaces" class="md-nav__link">
    namespaces
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-your-first-pod" class="md-nav__link">
    creating your first pod
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-yaml" class="md-nav__link">
    Using yaml
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../4. k8s-workloads/" title="Kubernetes workloads" class="md-nav__link">
      Kubernetes workloads
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../5. k8s-exposing/" title="Exposing Kubernetes workloads" class="md-nav__link">
      Exposing Kubernetes workloads
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../6. k8s-network-policies/" title="Kubernetes Network Policies" class="md-nav__link">
      Kubernetes Network Policies
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#getting-information-from-the-cluster" class="md-nav__link">
    Getting information from the cluster
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#namespaces" class="md-nav__link">
    namespaces
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-your-first-pod" class="md-nav__link">
    creating your first pod
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-yaml" class="md-nav__link">
    Using yaml
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="learning-kubernetes">Learning Kubernetes</h1>
<p>Kubernetes is an open-source platform for automating deployment, scaling, and operations of application containers across clusters of hosts, providing container-centric infrastructure.</p>
<p>For more information see: https://kubernetes.io/docs/concepts/overview/what-is-kubernetes/</p>
<p>This workshop provides a first introduction in Kubernetes. A set of examples are given which will provide hands on experience in using kubernetes.</p>
<h2 id="getting-information-from-the-cluster">Getting information from the cluster</h2>
<p>To do this workshop it easy to execute the commands as user root. In a production environment this is not adviced.
Logon to your Ubuntu machine and become user root </p>
<pre><code>sudo su -
</code></pre>

<p>You can retrieve information on the cluster by querying the kubernetes API. </p>
<p>You can query the API directly with curl but to make life easy we will use the program kubectl to talk to the api. You can for instance collect data about the cluster using:</p>
<pre><code># kubectl cluster-info
Kubernetes master is running at https://127.0.0.1:6443
CoreDNS is running at https://127.0.0.1:6443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy
Metrics-server is running at https://127.0.0.1:6443/api/v1/namespaces/kube-system/services/https:metrics-server:/proxy

To further debug and diagnose cluster problems, use 'kubectl cluster-info dump'.
</code></pre>

<p>To find out at what version the cluster is running use:</p>
<pre><code># kubectl version
Client Version: version.Info{Major:&quot;1&quot;, Minor:&quot;17&quot;, GitVersion:&quot;v1.17.2+k3s1&quot;, GitCommit:&quot;cdab19b09a84389ffbf57bebd33871c60b1d6b28&quot;, GitTreeState:&quot;clean&quot;, BuildDate:&quot;2020-01-27T18:09:26Z&quot;, GoVersion:&quot;go1.13.6&quot;, Compiler:&quot;gc&quot;, Platform:&quot;linux/amd64&quot;}
Server Version: version.Info{Major:&quot;1&quot;, Minor:&quot;17&quot;, GitVersion:&quot;v1.17.2+k3s1&quot;, GitCommit:&quot;cdab19b09a84389ffbf57bebd33871c60b1d6b28&quot;, GitTreeState:&quot;clean&quot;, BuildDate:&quot;2020-01-27T18:09:26Z&quot;, GoVersion:&quot;go1.13.6&quot;, Compiler:&quot;gc&quot;, Platform:&quot;linux/amd64&quot;}
</code></pre>

<p>To see the nodes the cluster contains use:</p>
<pre><code># kubectl get nodes
NAME        STATUS   ROLES    AGE   VERSION
localhost   Ready    master   3d    v1.17.2+k3s1
</code></pre>

<p>In above example only one node is showed. This is a one node cluster, in a production cluster there are normaly more nodes showed. There can be a master role and a worker role. In this setup the master is used to schedule workload as well.</p>
<h2 id="namespaces">namespaces</h2>
<p>On the cluster different namespaces have been deployed by default. A namespace separates resources. You can view the namespaces deployed on this cluster using:</p>
<pre><code># kubectl get namespaces
NAME              STATUS   AGE
default           Active   3d
kube-system       Active   3d
kube-public       Active   3d
kube-node-lease   Active   3d
</code></pre>

<p>If you do not specify the namespace, the default namespace is used to schedule a workload. </p>
<h2 id="creating-your-first-pod">creating your first pod</h2>
<p>A pod is set of containers running together and sharing a network. The containers are deployed together on the same host within a certain namespace. A pod can be launched using the command line tool kubectl. </p>
<p>In this example you will deploy a pod with a single container using the image: <code>kpnappfactory/testcontainer</code>.</p>
<pre><code>$ kubectl run example --image=nginx --port 80 --restart=Never
pod &quot;example&quot; created
</code></pre>

<p>Once you have deployed the pod you should be able to see it using:</p>
<pre><code>$ kubectl get pods
</code></pre>

<p>You can view the details of the pod using:</p>
<pre><code>$ kubectl describe pod &lt;podname&gt;
Name:       example
Namespace:  platform
Node:       k8snode1/10.0.0.14
Start Time: Tue, 13 Jun 2017 14:37:59 +0200
Labels:     &lt;none&gt;
Status:     Running
IP:     10.47.0.14
Controllers:    &lt;none&gt;
...
</code></pre>

<p>You should be able to ping the example pod from you shell. Use the IP address you just found:</p>
<pre><code>ping &lt;IP&gt;
64 bytes from 10.47.0.14: seq=1 ttl=64 time=0.540 ms
64 bytes from 10.47.0.14: seq=2 ttl=64 time=1.187 ms
^C
--- 10.47.0.14 ping statistics ---
2 packets transmitted, 2 packets received, 0% packet loss
round-trip min/avg/max = 0.540/1.112/1.825 ms
</code></pre>

<p>The example pod is running a webserver you should be able to query. We should be able to query the webserver from the shell. For example by using a command line web browser (replace the IP address with the address you have found yourself):</p>
<pre><code>curl http://&lt;IP&gt;
</code></pre>

<p>Note! This webserver is running on the Kubernetes overlay network whithin the cluster and is only accessible from inside the cluster. </p>
<h2 id="using-yaml">Using yaml</h2>
<p>Simple resources can be created using the commandline only but for more complex resources using a yaml specification is a must. When you create a resource via kubectl as done before you can view the yaml by using:</p>
<pre><code>kubectl get pods example -o yaml
</code></pre>

<p>Now create a file named <code>myfirstpod.yml</code> with the configuration below. You van use vim or nano as your editor.</p>
<pre><code>---
apiVersion: v1
kind: Pod
metadata:
  labels:
    phase: prod
    role: frontend
    name: myfirstpod
  name: myfirstpod
spec:
  containers:
  - name: filepuller
    image: sliranc/filepuller:latest
    volumeMounts:
    - mountPath: /usr/share/nginx/html
      name: static-vol
  - name: webserver
    image: nginx:latest
    ports:
    - containerPort: 80
    volumeMounts:
      - mountPath: /usr/share/nginx/html
        name: static-vol
  volumes:
  - name: static-vol
    emptyDir: {}
</code></pre>

<p>We can create a new deployment with this yaml file using:</p>
<pre><code>$ kubectl apply -f myfirstpod.yml
deployment &quot;example&quot; created
</code></pre>

<p>You can see the pods created with:</p>
<pre><code>kubectl get pods
NAME                             READY     STATUS              RESTARTS   AGE
myfirstpod                       2/2       Running             0          3m
</code></pre>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../2. docker-build/" title="Building containers" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Building containers
              </span>
            </div>
          </a>
        
        
          <a href="../4. k8s-workloads/" title="Kubernetes workloads" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Kubernetes workloads
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org" target="_blank" rel="noopener">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.df00da5d.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>